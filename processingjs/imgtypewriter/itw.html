<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>ITW -- ImageTypeWriter -- by spirit</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="../processing.min.js"></script>
<link rel="stylesheet" type="text/css" href="itw.css"/>

<style>
p, li {
	font-size:10pt;
	font-family:Arial,sans-serif;
	line-height:1.5;
	color:black
}

.log {
	font-size:8pt;
	font-family:Arial,sans-serif;
	line-height:1.5;
	color:gray
}

table {
    border-collapse: collapse;
}

table, th, td {
   border: 1px solid black;
} 
</style>
</head>
<body>
<h1>ITW -- ImageTypeWriter</h1>
<p>
This is a program which lets you type using images instead of characters. You can also think of it as a software which replaces each character in a text by an image representing (in whatever way) that character in the output. You can define a custom mapping of characters to images, or use one of the mappings we provide. The program can be used for various problems, look at our predefined mappings below to get some ideas.
</p>
<p>
ImageTypeWriter was written by Tim 'spirit' Schäfer, and it is powered by JavaScript and Processing.js. You need a fairly recent browser (with HTML5 canvas support) to use it.
</p>

<form>
<h3>Character to Image mapping</h3>

<!--
<input type="radio" name="mapping_type" value="preset" checked>Select from presets
<br>
<input type="radio" name="mapping_type" value="custom" >Create custom mapping
-->
  
<h4>Presets</h4>
<p>The number indicates the code length, i.e., how many consecutive chars encode for a single image.</p>

<p>Select preset:</p>
<select name="mapping_presets">
  <option value="test">(1) Echo -- Simple test with a monospaced font</option>
  <option value="test">(1) Mirror -- Another test with a monospaced font</option>
  <option value="anlaute">(1) Anlaute -- Character to Anlaut image</option>
  <option value="amino1">(1) Amino acids -- One letter AA code to chemical structure</option>
  <option value="country">(2) Flags -- Country code to flag </option>
  <option value="dna">(3) Genetic code -- Codon to amino acid</option>
  <option value="amino3">(3) Amino acids -- Three letter AA code to chemical structure</option>
</select>

<br/><br/>

<p><b>Display active mapping:</b></p>

<div class="text_container">
	      <h5><i>Click here to show (or hide) the complete character-to-image mapping table.</i></h5>
	      <div>
         
<div id="show_mapping_preset">
 <!-- The rows of this table get appended using JS, depending on the selected preset -->
 <table id="table_mapping_preset" style="width:100%">
  <tr>
    <th>Character code</th>
    <th>File</th>
    <th>Resulting image</th>
  </tr>
</table>
</div>

   </div>
</div>


<!--
<h4>Custom mapping</h4>
<fieldset>
    <legend>Custom mapping:</legend>
    Code length:<br>
    <input type="text" name="custom_code_length" value="2">
    <br>
</fieldset>
-->

<h3>Your text</h3>
<p>Enter the text you want converted to an image, according to the mapping table defined above.</p>
<textarea id="usertext" name="usertext" rows="10" cols="30">
A cat eats fish. An A is not a B.
</textarea>
</form>

<br><br>
<h3>Result</h3>
<p>The resulting image is displayed on the canvas below. You can adapt the canvas size to your needs here. Note that the maximum size depends on your browser.<br/><br/>
Canvas width: <input id="user_canvas_width" name="user_canvas_width" type="number" min="100" max="20000" step="100" value="800"> pixels<br/>
Canvas height: <input id="user_canvas_height" name="user_canvas_height" type="number" min="100" max="20000" step="100" value="600"> pixels<br/><br/>
Click the canvas to update it, e.g. when you changed the text in the box above or when you want the canvas size to change. (Take a screenshot to save the result for now, there is no exporter yet.)</p>

<canvas data-processing-sources="itw.pde"></canvas>

<br>
<h3>Log</h3>
<p>This is the application log, intended for the developer only. If stuff went wrong when you tried to use this app, write me an email explaining what went wrong and include this log: just copy and paste it into the email, below your description of the problem. I know that reporting a problem via email is work for you, and I promise I will respond to your email and try to fix the problem. Keep in mind though that it's also work for me to fix it. ;)</p>
<div id="log" class="log"></div>


<script>
  $(document).ready(function(){
      $('.text_container').addClass("hidden");

      $('.text_container').click(function() {
        var $this = $(this);
        if ($this.hasClass("hidden")) {
          $(this).removeClass("hidden").addClass("visible");
        } else {
          $(this).removeClass("visible").addClass("hidden");
        }
      });
	  
	  
	  var imagemap = {};
  $.getJSON("mappings/test/test.json", function(data) {
    //console.log(data);
	imagemap = data;
	console.log("Loaded data");
	console.log(imagemap);
	console.log("Showing object keys:");
	console.log(Object.keys(imagemap));
	console.log("Loaded dir");
	console.log(imagemap.dir);
	console.log("Showing data keys:");
	console.log(Object.keys(data));
    // data is a JavaScript object now. Handle it as such
  })  .done(function() {
    console.log("DONE: Retrieved imagemap from JSON file:" );
	console.log(imagemap);
	console.log("DONE: Showing object keys:");
	console.log(Object.keys(imagemap));
	//console.log("DONE: Showing data keys:");
	//console.log(Object.keys(data));
	//var mapping = { "A" : "mappings/test/A.png", "B" : "mappings/test/B.png", "C" : "mappings/test/C.png" };
  var mapname = imagemap.dir;
  
  console.log("DONE: Retrieved mapping name from imagemap:" );
  console.log(mapname);
  
  var mapping = {};
  var mapping_test = {};
  var mapping_anlaute = {};
  mapping = imagemap.mapping;
  // --------------------------------------- set mapping manually for now, all the shit above does nothing --------------------------
  mapping_test = { 
                 "A" : "mappings/test/0.png",
				 "B" : "mappings/test/1.png",
				 "C" : "mappings/test/2.png",
				 "D" : "mappings/test/3.png",
				 "E" : "mappings/test/4.png",
				 "F" : "mappings/test/5.png",
				 "G" : "mappings/test/6.png",
				 "H" : "mappings/test/7.png",
				 "I" : "mappings/test/8.png",
				 "J" : "mappings/test/9.png",
				 "K" : "mappings/test/10.png",
				 "L" : "mappings/test/11.png",
				 "M" : "mappings/test/12.png",
				 "N" : "mappings/test/13.png",
				 "O" : "mappings/test/14.png",
				 "P" : "mappings/test/15.png",
				 "Q" : "mappings/test/16.png",
				 "R" : "mappings/test/17.png",
				 "S" : "mappings/test/18.png",
				 "T" : "mappings/test/19.png",
				 "U" : "mappings/test/20.png",
				 "V" : "mappings/test/21.png",
				 "W" : "mappings/test/22.png",
				 "X" : "mappings/test/23.png",
				 "Y" : "mappings/test/24.png",
				 "Z" : "mappings/test/25.png",
				 "a" : "mappings/test/26.png",
				 "b" : "mappings/test/27.png",
				 "c" : "mappings/test/28.png",
				 "d" : "mappings/test/29.png",
				 "e" : "mappings/test/30.png",
				 "f" : "mappings/test/31.png",
				 "g" : "mappings/test/32.png",
				 "h" : "mappings/test/33.png",
				 "i" : "mappings/test/34.png",
				 "j" : "mappings/test/35.png",
				 "k" : "mappings/test/36.png",
				 "l" : "mappings/test/37.png",
				 "m" : "mappings/test/38.png",
				 "n" : "mappings/test/39.png",
				 "o" : "mappings/test/40.png",
				 "p" : "mappings/test/41.png",
				 "q" : "mappings/test/42.png",
				 "r" : "mappings/test/43.png",
				 "s" : "mappings/test/44.png",
				 "t" : "mappings/test/45.png",
				 "u" : "mappings/test/46.png",
				 "v" : "mappings/test/47.png",
				 "w" : "mappings/test/48.png",
				 "x" : "mappings/test/49.png",
				 "y" : "mappings/test/50.png",
				 "z" : "mappings/test/51.png",
				 "0" : "mappings/test/52.png",
				 "1" : "mappings/test/53.png",
				 "2" : "mappings/test/54.png",
				 "3" : "mappings/test/55.png",
				 "4" : "mappings/test/56.png",
				 "5" : "mappings/test/57.png",
				 "6" : "mappings/test/58.png",
				 "7" : "mappings/test/59.png",
				 "8" : "mappings/test/60.png",
				 "9" : "mappings/test/61.png",
				 "(" : "mappings/test/62.png",
				 "!" : "mappings/test/63.png",
				 "@" : "mappings/test/64.png",
				 "#" : "mappings/test/65.png",
				 "$" : "mappings/test/66.png",
				 "%" : "mappings/test/67.png",
				 "&" : "mappings/test/68.png",
				 "." : "mappings/test/69.png",
				 "," : "mappings/test/70.png",
				 "?" : "mappings/test/71.png",
				 ":" : "mappings/test/72.png",
				 ";" : "mappings/test/73.png",
				 ")" : "mappings/test/74.png",
				 " " : "mappings/test/75.png"
				 };
				 
  mapping_anlaute = { 
                 "A" : "mappings/anlaute/Ameise.jpg",
				 "a" : "mappings/anlaute/Apfel.jpg",
				 "ä" : "mappings/anlaute/Aepfel.jpg",
				 "Ä" : "mappings/anlaute/Auto.jpg",
				 "B" : "mappings/anlaute/Banane.jpg",
				 "b" : "mappings/anlaute/Banane.jpg",
				 "c" : "mappings/anlaute/Cent.jpg",
				 "C" : "mappings/anlaute/Chamaelion.jpg",
				 "1" : "mappings/anlaute/Chinese.jpg",
				 "2" : "mappings/anlaute/Computer.jpg",
				 "3" : "mappings/anlaute/Computer_Cent.jpg",
				 "D" : "mappings/anlaute/Dino.jpg",
				 "d" : "mappings/anlaute/Dino.jpg",
				 "E" : "mappings/anlaute/Eis.jpg",
				 "e" : "mappings/anlaute/Ente.jpg",
				 "4" : "mappings/anlaute/Esel_Ente.jpg",
				 "5" : "mappings/anlaute/Esel.jpg",
				 "6" : "mappings/anlaute/Eule.jpg",
				 "F" : "mappings/anlaute/Fisch.jpg",
				 "f" : "mappings/anlaute/Fisch.jpg",
				 "G" : "mappings/anlaute/Gabel.jpg",
				 "g" : "mappings/anlaute/Gabel.jpg",
				 "H" : "mappings/anlaute/Hut.jpg",
				 "h" : "mappings/anlaute/Hut.jpg",
				 "I" : "mappings/anlaute/Ich_Dach.jpg",
				 "i" : "mappings/anlaute/Igel.jpg",
				 "7" : "mappings/anlaute/Insel.jpg",
				 "J" : "mappings/anlaute/Jo-Jo.jpg",
				 "j" : "mappings/anlaute/Jo-Jo.jpg",
				 "K" : "mappings/anlaute/Kiwi.jpg",
				 "k" : "mappings/anlaute/Kiwi.jpg",
				 "L" : "mappings/anlaute/Loewe.jpg",
				 "l" : "mappings/anlaute/Loewe.jpg",
				 "M" : "mappings/anlaute/Maus.jpg",
				 "m" : "mappings/anlaute/Maus.jpg",
				 "N" : "mappings/anlaute/Nest.jpg",
				 "n" : "mappings/anlaute/Nest.jpg",
				 "O" : "mappings/anlaute/Ofen.jpg",
				 "o" : "mappings/anlaute/Ordner.jpg",
				 "Ö" : "mappings/anlaute/Oellampe.jpg",
				 "ö" : "mappings/anlaute/Oellampe.jpg",
				 "p" : "mappings/anlaute/Palme.jpg",
				 "P" : "mappings/anlaute/Pfeil.jpg",
				 "Q" : "mappings/anlaute/Qualle.jpg",
				 "q" : "mappings/anlaute/Qualle.jpg",
				 "R" : "mappings/anlaute/Rakete.jpg",
				 "r" : "mappings/anlaute/Rakete.jpg",
				 "s" : "mappings/anlaute/Schere.jpg",
				 "8" : "mappings/anlaute/Sofa.jpg",
				 "9" : "mappings/anlaute/Spinne.jpg",
				 "0" : "mappings/anlaute/Stern.jpg",
				 "t" : "mappings/anlaute/Tisch.jpg",
				 "T" : "mappings/anlaute/Tisch.jpg",
				 "u" : "mappings/anlaute/Ufo.jpg",
				 "U" : "mappings/anlaute/Unterhemd.jpg",
				 "Ü" : "mappings/anlaute/Ueberholverbot.jpg",
				 "ü" : "mappings/anlaute/Ueberholverbot.jpg",
				 "v" : "mappings/anlaute/Vase.jpg",
				 "V" : "mappings/anlaute/Vogel.jpg",
				 "(" : "mappings/anlaute/Vogel_Vase.jpg",
				 "w" : "mappings/anlaute/Wolke.jpg",
				 "W" : "mappings/anlaute/Wolke.jpg",
				 "x" : "mappings/anlaute/Xylophon.jpg",
				 "X" : "mappings/anlaute/Xylophon.jpg",
				 "y" : "mappings/anlaute/Yak.jpg",
				 "Y" : "mappings/anlaute/Yak.jpg",
				 "z" : "mappings/anlaute/Zaun.jpg",
				 "Z" : "mappings/anlaute/Zaun.jpg",
				 " " : "mappings/anlaute/Leeres_Bild.jpg"
				 };
  
  
  mapping = mapping_anlaute;
  
  var table = document.getElementById("table_mapping_preset");
  
  for(var key in mapping) {
    var filename = mapping[key];
    
    // Create an empty <tr> element and add it to the 1st position of the table:
    var row = table.insertRow(1);
    // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);

    // Add some text to the new cells:
    cell1.innerHTML = key;
    cell2.innerHTML = filename;
    cell3.innerHTML = "<img src='" + filename + "' alt='WARNING: Could not load image file.'/>";


  }
  })
  .fail(function() {
    console.log( "error" );
  })
  .always(function() {
    console.log( "complete" );
	console.log("COMPLETE: Retrieved imagemap from JSON file:" );
	console.log(imagemap);
	console.log("COMPLETE: Showing object keys:");
	console.log(Object.keys(imagemap));
	//console.log("COMPLETE: Showing data keys:");
	//console.log(Object.keys(data));
  });
	  
	  
    });
  
  
  
  
  
  


</script>

</body>
</html>